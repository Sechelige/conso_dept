<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Exemple de Requête SPARQL</title>
</head>
<body>
  <h1>Exemple de Requête SPARQL</h1>

  <button onclick="executerRequeteSPARQL()">Exécuter Requête SPARQL</button>

  <div id="resultats"></div>

  <script>
    function executerRequeteSPARQL() {
      const endpointUrl = 'http://127.0.0.1:7200/repositories/Projet'; // Exemple avec DBpedia

      const query = `
      PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
      PREFIX iut: <https://cours.iut-orsay.fr/npbd/projet/oueyeya/>
      PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

      SELECT * WHERE { 
          ?dep rdf:type iut:Departement ;
              iut:code ?codeDep;
              rdfs:label ?name;
              iut:drapeau ?flag;
              iut:population ?population;
              iut:image ?image.
          FILTER(?codeDep = '01')
      }`;

      fetch(endpointUrl + '?query=' + encodeURIComponent(query), {
        method: 'GET',
        headers: { 'Accept': 'application/sparql-results+json' }
      })
      .then(response => response.json())
      .then(data => {
        afficherResultats(data);
      })
      .catch(error => {
        afficherErreur('Erreur lors de la requête SPARQL: ' + error);
      });
    }

    function afficherResultats(data) {
      console.log(data);
    }

    function afficherErreur(message) {
      const resultatsDiv = document.getElementById('resultats');
      resultatsDiv.innerHTML = '<h2>Erreur</h2>';
      resultatsDiv.innerHTML += `<p>${message}</p>`;
    }
  </script>
</body>
</html>

